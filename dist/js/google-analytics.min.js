var GoogleAnalytics={};GoogleAnalytics=GoogleAnalytics||{},GoogleAnalytics.Admin=GoogleAnalytics.Admin||{},GoogleAnalytics.Admin.Dashboard=function(e){function a(){"dashboard"===pagenow&&googleanalytics.google_analytics_view&&e.when(e.ajax({url:ajaxurl,type:"post",data:{action:"fetch_access_token"}})).then(function(a,t,n){gapi.analytics.ready(function(){gapi.analytics.auth.authorize({serverAuth:{access_token:a}});var t=new gapi.analytics.googleCharts.DataChart({query:{ids:"ga:"+googleanalytics.google_analytics_view,"start-date":"30daysAgo","end-date":"today",metrics:"ga:sessions,ga:users",dimensions:"ga:date"},chart:{container:"line-chart-container",type:"LINE",options:{width:"100%"}}});t.execute(),e(window).resize(function(){t.execute()})})})}return new a}(jQuery),GoogleAnalytics=GoogleAnalytics||{},GoogleAnalytics.Admin=GoogleAnalytics.Admin||{},GoogleAnalytics.Admin.Settings=function(e){function a(){e(function(){this.handleEvents()}.bind(this))}return a.prototype.saveAccountKey=function(a){e.ajax({url:ajaxurl,type:"post",data:{action:"save_account_key",key:a},success:function(a){a.success?location.reload():e(".notice").addClass("error").removeClass("updated").empty().append("<p>"+a.data+"</p>").show()}})},a.prototype.handleEvents=function(){e("#save-service-account").submit(function(t){t.preventDefault();var n=e('[name="service_account_key"]').val();return n=this.isJson(n),n===!1?void e(".notice").addClass("error").removeClass("updated").empty().append("<p>"+googleanalytics.invalid_json+"</p>").show():void a.prototype.saveAccountKey(n)}.bind(this))},a.prototype.isJson=function(e){try{JSON.parse(e)}catch(a){return!1}return JSON.parse(e)},new a}(jQuery);