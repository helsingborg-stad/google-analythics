var GoogleAnalytics={};GoogleAnalytics=GoogleAnalytics||{},GoogleAnalytics.Admin=GoogleAnalytics.Admin||{},GoogleAnalytics.Admin.Dashboard=function(a){function e(){"dashboard"===pagenow&&a.when(a.ajax({url:ajaxurl,type:"post",data:{action:"fetch_access_token"}})).then(function(a,e,t){gapi.analytics.ready(function(){gapi.analytics.auth.authorize({serverAuth:{access_token:a}});var e=new gapi.analytics.googleCharts.DataChart({query:{ids:"ga:"+googleanalytics.google_analytics_view,"start-date":"30daysAgo","end-date":"today",metrics:"ga:sessions,ga:users",dimensions:"ga:date"},chart:{container:"line-chart-container",type:"LINE",options:{width:"100%"}}});e.execute()})})}return new e}(jQuery),GoogleAnalytics=GoogleAnalytics||{},GoogleAnalytics.Admin=GoogleAnalytics.Admin||{},GoogleAnalytics.Admin.Settings=function(a){function e(){a(function(){this.handleEvents()}.bind(this))}return e.prototype.saveAccountKey=function(e){a.ajax({url:ajaxurl,type:"post",data:{action:"save_account_key",key:e},success:function(e){e.success?location.reload():a(".notice").addClass("error").removeClass("updated").empty().append("<p>"+e.data+"</p>").show()}})},e.prototype.handleEvents=function(){a("#save-service-account").submit(function(t){t.preventDefault();var n=a('[name="service_account_key"]').val();return n=this.isJson(n),n===!1?void a(".notice").addClass("error").removeClass("updated").empty().append("<p>"+googleanalytics.invalid_json+"</p>").show():void e.prototype.saveAccountKey(n)}.bind(this))},e.prototype.isJson=function(a){try{JSON.parse(a)}catch(e){return!1}return JSON.parse(a)},new e}(jQuery);